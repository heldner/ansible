#!/bin/sh
UID="$(id -u)"
exec bwrap \
     --symlink /usr/lib64 /lib64 \
     --symlink /usr/lib /lib \
     --symlink /usr/bin /bin \
     --symlink /usr/bin /sbin \
     --proc /proc \
     --dev /dev \
     --dev-bind-try /dev/char /dev/char \
     --dev-bind-try /dev/dri /dev/dri \
     --dev-bind-try /dev/video0 /dev/video0 \
     --dev-bind-try /dev/video1 /dev/video1 \
     --ro-bind /etc/passwd /etc/passwd \
     --ro-bind /etc/group /etc/group \
     --ro-bind /etc/hostname /etc/hostname \
     --ro-bind /etc/hosts /etc/hosts \
     --ro-bind /etc/localtime /etc/localtime \
     --ro-bind /etc/nsswitch.conf /etc/nsswitch.conf \
     --ro-bind /usr/bin/update-mime-database /usr/bin/update-mime-database \
     --ro-bind /usr/bin/update-desktop-database /usr/bin/update-desktop-database \
     --ro-bind /usr/share /usr/share/ \
     --ro-bind /usr/lib /usr/lib \
     --ro-bind /usr/lib64 /usr/lib64 \
     --ro-bind-try /sys/bus/usb /sys/bus/usb \
     --ro-bind-try /sys/bus/pci /sys/bus/pci \
     --ro-bind-try /sys/class/hidraw /sys/class/hidraw \
     --ro-bind-try /sys/dev /sys/dev \
     --ro-bind-try /sys/devices /sys/devices \
     --ro-bind-try /etc/resolv.conf /etc/resolv.conf \
     --ro-bind-try /etc/xdg /etc/xdg \
     --ro-bind-try /etc/gtk-2.0 /etc/gtk-2.0 \
     --ro-bind-try /etc/gtk-3.0 /etc/gtk-3.0 \
     --ro-bind-try /etc/fonts /etc/fonts \
     --ro-bind-try /etc/mime.types /etc/mime.types \
     --ro-bind-try /etc/alsa /etc/alsa \
     --tmpfs /run \
     --tmpfs /tmp \
     --ro-bind-try "${XDG_RUNTIME_DIR}/pipewire-0" "${XDG_RUNTIME_DIR}/pipewire-0" \
     --ro-bind-try "${XDG_RUNTIME_DIR}/pipewire-0.lock" "${XDG_RUNTIME_DIR}/pipewire-0.lock" \
     --ro-bind-try "${XDG_RUNTIME_DIR}/pulse" "${XDG_RUNTIME_DIR}/pulse" \
     --bind-try ~/Downloads ~/Downloads \
     --bind-try ~/Documents/pages ~/Documents/pages \
     --bind-try ~/.librewolf ~/.librewolf \
     --bind-try ~/.cache/librewolf ~/.cache/librewolf \
     --ro-bind-try ~/Pictures/Screenshots ~/Pictures/Screenshots \
     --ro-bind-try /run/user/"${UID}"/bus /run/user/"${UID}"/bus \
     --setenv MOZ_ENABLE_WAYLAND 0 \
     --setenv PATH /usr/bin \
     --unshare-all \
     --share-net \
     --hostname mypc \
     --new-session \
     /usr/share/librewolf/librewolf "$@" > /dev/null 2>&1
